(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function r(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-6844d4f1":"6f9cf8aa"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=n);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,a[1](c)}s[t]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"555d":function(t,e,a){"use strict";var n=a("eeb3"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("0c67"),a("450d");var n=a("299c"),s=a.n(n),o=(a("b8e0"),a("a4c4")),r=a.n(o),i=(a("6b30"),a("c284")),l=a.n(i),c=(a("f4f9"),a("c2cc")),d=a.n(c),u=(a("7a0f"),a("0f6c")),f=a.n(u),p=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",[a("div",{staticClass:"header-title"},[t._v(t._s(t.info.title))])]),a("main",{staticClass:"main"},[a("el-card",{staticClass:"box-card"},[a("el-row",{staticClass:"th server-row hidden-xs-only",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"col-name",attrs:{md:3}},[t._v("名称")]),a("el-col",{staticClass:"col-region",attrs:{md:3}},[t._v("地区")]),a("el-col",{staticClass:"col-uptime",attrs:{md:2}},[t._v("运行")]),a("el-col",{staticClass:"col-loadavg",attrs:{md:1}},[t._v("负载")]),a("el-col",{attrs:{md:2}},[t._v("网络")]),a("el-col",{attrs:{md:3}},[t._v("CPU")]),a("el-col",{attrs:{md:3}},[t._v("RAM")]),a("el-col",{attrs:{md:3}},[t._v("HDD")]),a("el-col",{staticClass:"col-updated",attrs:{md:1}},[t._v("更新")])],1),t._l(t.info.items,(function(e){return["server"==e.mode?a("el-row",{key:e.id,staticClass:"tr server-row",class:t.data[e.id].online?"online":"offline",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"col-name",attrs:{md:3,xs:10}},[a("flag",{staticClass:"hidden-sm-and-up",attrs:{squared:!1,iso:e.region.toLowerCase()}}),a("span",[t._v(" "+t._s(e.name)+" "),a("sup",[t._v(t._s(e.type))])])],1),a("el-col",{staticClass:"col-region",attrs:{md:3,xs:7}},[a("flag",{staticClass:"hidden-xs-only",attrs:{squared:!1,iso:e.region.toLowerCase()}}),a("span",[t._v(t._s(e.location))])],1),t.data[e.id].online?[a("el-col",{staticClass:"col-uptime",attrs:{md:2,xs:4}},[t._v(t._s(t.s2d(t.data[e.id].uptime)))]),a("el-col",{staticClass:"col-loadavg",attrs:{md:1,xs:5}},[a("el-tooltip",{attrs:{placement:"left-start"}},[a("div",[a("span",{staticClass:"hidden-sm-and-up"},[t._v("负载")]),t._v(t._s(t.data[e.id].loadavg[0].toFixed(2)))]),a("div",{staticClass:"info-tooltip",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.data[e.id].loadavg[0].toFixed(2))),a("br"),t._v(" "+t._s(t.data[e.id].loadavg[1].toFixed(2))),a("br"),t._v(" "+t._s(t.data[e.id].loadavg[2].toFixed(2))+" ")])])],1),a("el-col",{staticClass:"col-netdev",attrs:{md:2,xs:10}},[a("div",{staticClass:"up",domProps:{innerHTML:t._s(t.netTpl(t.data[e.id].net.tx,"▲"))}}),a("div",{staticClass:"down",domProps:{innerHTML:t._s(t.netTpl(t.data[e.id].net.rx,"▼"))}})]),a("el-col",{staticClass:"col-updated hidden-sm-and-up",attrs:{md:1,xs:6}},[a("span",[t._v(t._s(t.s2fr(t.data[e.id].last,t.now))+"更新")])]),a("el-col",{attrs:{md:3,xs:8}},[a("el-progress",{attrs:{"stroke-width":12,color:t.color,percentage:Math.round(100*t.data[e.id].cpu)}})],1),a("el-col",{attrs:{md:3,xs:8}},[a("el-tooltip",{attrs:{placement:"left-start"}},[a("el-progress",{attrs:{"stroke-width":12,color:t.color,percentage:t.memperc(t.data[e.id])}}),a("div",{staticClass:"info-tooltip",attrs:{slot:"content"},slot:"content"},[t._v(" Mem "),a("br"),t._v(t._s(t.fileSize(t.data[e.id].mem.total-t.data[e.id].mem.available))+"/"+t._s(t.fileSize(t.data[e.id].mem.total))+" "),a("br"),t._v(" Swap"),a("br"),t._v(t._s(t.fileSize(t.data[e.id].mem.swap-t.data[e.id].mem.swapFree))+"/"+t._s(t.fileSize(t.data[e.id].mem.swap))+" ")])],1)],1),a("el-col",{attrs:{md:3,xs:8}},[a("el-tooltip",{attrs:{placement:"left-start"}},[a("el-progress",{attrs:{"stroke-width":12,color:t.color,percentage:t.hddperc(t.data[e.id])}}),a("div",{staticClass:"info-tooltip",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.fileSize(t.data[e.id].disk.used))+"/"+t._s(t.fileSize(t.data[e.id].disk.total))+" ")])],1)],1)]:[a("el-col",{staticClass:"col-updated hidden-sm-and-up",attrs:{md:1,xs:4}},[a("span",[t._v(t._s(t.s2fr(t.data[e.id].last,t.now)))])]),a("el-col",{staticClass:"col-offline",attrs:{md:16,xs:10}},[t._v("离线")])],a("el-col",{staticClass:"col-updated hidden-xs-only",attrs:{md:1,xs:3}},[t._v(t._s(t.s2fr(t.data[e.id].last,t.now)))])],2):t._e()]}))],2)],1),a("footer",[a("div",{domProps:{innerHTML:t._s(t.config.footer)}})])])},v=[],h=(a("99af"),a("b680"),a("d3b7"),a("96cf"),a("1da1")),_=a("6829"),b=a.n(_),x=window._TOKI_PRE_CONFIG,w={name:"App",data:function(){return{now:0,info:{title:"ServerStatus",items:[]},data:{},config:x}},methods:{netTpl:function(t,e){var a,n;if(t<1)a=(1024*t).toFixed(2),n="K";else if(t<1024)a=t.toFixed(2),n="M";else if(t<1048576){var s=t/1024;a=s.toFixed(2),n="G"}else{s=t/1048576;a=s.toFixed(2),n="T"}return'<span class="icon">'.concat(e,'</span><span class="n">').concat(a,'</span><span class="suffix">').concat(n,"iB</span>")},fileSize:function(t){var e,a;if(t<1)e=(1024*t).toFixed(2),a="K";else if(t<1024)e=t.toFixed(2),a="M";else if(t<1048576){var n=t/1024;e=n.toFixed(2),a="G"}else{n=t/1048576;e=n.toFixed(2),a="T"}return"".concat(e," ").concat(a,"iB")},memperc:function(t){return Math.round((t.mem.total-t.mem.available)/t.mem.total*100)},hddperc:function(t){return Math.round(t.disk.used/t.disk.total*100)},color:function(t){return t>85?"#F56C6C":t>70?"#E6A23C":"#409EFF"},s2d:function(t){var e=Math.floor(t/86400),a=Math.floor((t-24*e*3600)/3600);Math.floor((t-24*e*3600-3600*a)/60);return e>0?e+"天":a+"小时"},s2fr:function(t,e){if(e=e||Date.now(),t=Math.round((e-t)/1e3),t<3)return"刚刚";var a=Math.floor(t/86400),n=Math.floor((t-24*a*3600)/3600),s=Math.floor((t-24*a*3600-3600*n)/60),o=t-24*a*3600-3600*n-60*s;return a>0?"很久前":n>0?n+"时前":s>0?s+"分前":o+"秒前"},show:function(){document.getElementById("loader").style.display="none",document.getElementById("app").style.display="block"}},created:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){var n,s,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(setInterval(function(){this.now=Date.now()}.bind(t),1e3),t.$watch("info",(function(t){document.title=this.info.title})),!(x.interval<=0)){e.next=15;break}return e.next=5,a.e("chunk-6844d4f1").then(a.t.bind(null,"8055",7));case 5:n=e.sent.default,s=n(x.server+"/public",{transports:["websocket"]}),t.$socket=s,s.on("reconnect_attempt",(function(){s.io.opts.transports=["polling","websocket"]})),s.emit("subscribe",x.namespace),s.on("info",(function(e){t.info=e})),s.on("first",(function(e){t.data=e,t.show()})),s.on("update",(function(e){t.data[e[0]]=e[1]})),e.next=25;break;case 15:return o=b.a.get(x.server+"/namespace/"+x.namespace),r=b.a.get(x.server+"/box/"+x.namespace),e.next=19,o;case 19:return t.info=e.sent.data.data,e.next=22,r;case 22:t.data=e.sent.data.data,t.show(),setInterval(Object(h["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=b.a.get(x.server+"/box/"+x.namespace),t.next=3,e;case 3:this.data=t.sent.data.data;case 4:case"end":return t.stop()}}),t,this)}))).bind(t),x.interval);case 25:case"end":return e.stop()}}),e)})))()}},g=w,y=(a("5c0b"),a("555d"),a("2877")),C=Object(y["a"])(g,m,v,!1,null,"01554562",null),k=C.exports,M=a("d61f");a("e05f");p["default"].use(M["a"]),p["default"].use(f.a),p["default"].use(d.a),p["default"].use(l.a),p["default"].use(r.a),p["default"].use(s.a),p["default"].config.productionTip=!1,new p["default"]({render:function(t){return t(k)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},"9c0c":function(t,e,a){},eeb3:function(t,e,a){}});
//# sourceMappingURL=app.17dff561.js.map